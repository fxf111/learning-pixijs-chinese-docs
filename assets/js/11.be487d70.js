(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{214:function(t,s,a){"use strict";a.r(s);var n=a(28),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("英文教程原作者"),a("a",{attrs:{href:"http://www.yeahbutisitflash.com/?author=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Christopher"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://twitter.com/intent/follow?screen_name=chriscaleb",target:"_blank",rel:"noopener noreferrer"}},[t._v("关注他@chriscaleb"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("本系列教程已经针对"),a("a",{attrs:{href:"http://www.pixijs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PixiJS v4"),a("OutboundLink")],1),t._v("进行了更新。")]),t._v(" "),a("p",[t._v("你是否玩过诸如"),a("a",{attrs:{href:"http://www.adamatomic.com/canabalt/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Canabalt"),a("OutboundLink")],1),t._v("和"),a("a",{attrs:{href:"https://chrome.google.com/webstore/detail/monster-dash/cknghehebaconkajgiobncfleofebcog?hl=en",target:"_blank",rel:"noopener noreferrer"}},[t._v("Monster Dash"),a("OutboundLink")],1),t._v("等无尽的奔跑游戏，并想知道如何创建自己的滚动游戏地图。第一部分介绍了pixi.js渲染引擎，并介绍了视差滚动的基本原理。现在，我们将通过添加视口(viewport)的概念来构建第一次滚动尝试。")]),t._v(" "),a("h2",{attrs:{id:"你将会学到"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#你将会学到"}},[t._v("#")]),t._v(" 你将会学到...")]),t._v(" "),a("ul",[a("li",[t._v("扩展pixi.js显示对象")]),t._v(" "),a("li",[t._v("JavaScript中面向对象的基础知识")]),t._v(" "),a("li",[t._v("如何添加一个视口到你的滚动")])]),t._v(" "),a("h2",{attrs:{id:"你应该了解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#你应该了解"}},[t._v("#")]),t._v(" 你应该了解...")]),t._v(" "),a("ul",[a("li",[t._v("了解面向对象的概念")]),t._v(" "),a("li",[t._v("pixi.js的一些基础知识")])]),t._v(" "),a("p",[t._v("您将使用在"),a("RouterLink",{attrs:{to:"/guide/parallax-scroller/part-1.html"}},[t._v("第一个教程")]),t._v("中生成的代码。或者，您可以从"),a("a",{attrs:{href:"https://github.com/ccaleb/pixi-parallax-scroller/tree/master/tutorial-1",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub下载"),a("OutboundLink")],1),t._v("以前的教程源代码。另外，本教程的全部源代码也可以在"),a("a",{attrs:{href:"https://github.com/ccaleb/pixi-parallax-scroller/tree/master/tutorial-2",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub"),a("OutboundLink")],1),t._v("上找到。")],1),t._v(" "),a("p",[a("a",{attrs:{href:"http://www.yeahbutisitflash.com/pixi-parallax-scroller/tutorial-1/index.html"}},[a("img",{attrs:{src:"/scroller/ps-tut1-screenshot1.png",alt:""}})])]),t._v(" "),a("p",[t._v("作为提醒，点击上面的图片。它将启动并运行当前版本的视差滚动。目前只有两个层，但我们将开始添加第三个，更复杂的层，在接下来的这个教程。我们将通过添加viewport的概念来添加第三层。在此过程中，我们还将执行一些重要的重构，以便将scroller包装在它自己的类中。")]),t._v(" "),a("p",[t._v("虽然本教程主要针对初学者，但希望您至少对面向对象编程概念有基本的了解。不要担心这句话会让您感到不舒服，因为对于不熟悉面向对象JavaScript的人来说，我仍然会在正确的方向上提供足够的提示。")]),t._v(" "),a("h2",{attrs:{id:"开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[t._v("#")]),t._v(" 开始")]),t._v(" "),a("p",[t._v("如果您还没有完成本系列的"),a("RouterLink",{attrs:{to:"/guide/parallax-scroller/part-1.html"}},[t._v("第一个教程")]),t._v("，那么我建议您先从那里开始。")],1),t._v(" "),a("p",[t._v("还需要记住的是，您需要运行本地Web服务器才能测试您的工作。 如果您尚未这样做，请参阅"),a("RouterLink",{attrs:{to:"/guide/parallax-scroller/part-1.html#入门"}},[t._v("第一个教程的“入门”")]),t._v("部分，以获取有关如何设置Web服务器的详细信息。")],1),t._v(" "),a("h2",{attrs:{id:"pixi显示对象的扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pixi显示对象的扩展"}},[t._v("#")]),t._v(" PIXI显示对象的扩展")]),t._v(" "),a("p",[t._v("正如我们之前发现的，pixi.js提供了几种可以使用的显示对象类型。 如果您还记得的话，我们在选择"),a("code",[t._v("PIXI.extras.TilingSprite")]),t._v("之前，先简单的体验过"),a("code",[t._v("PIXI.Sprite")]),t._v("。")]),t._v(" "),a("p",[t._v("这两个类有很多相同属性。例如，它们都提供了·"),a("code",[t._v("position")]),t._v("、"),a("code",[t._v("width")]),t._v("、"),a("code",[t._v("height")]),t._v("和"),a("code",[t._v("alpha")]),t._v("属性。另外，可以通过"),a("code",[t._v("addChild()")]),t._v("方法轻松地将它们添加到容器中。事实上，是"),a("code",[t._v("PIXI.Container")]),t._v("本身是一个显示对象，它还为您提供了"),a("code",[t._v("Sprite")]),t._v("和"),a("code",[t._v("TilingSprite")]),t._v("类所使用的许多相同属性。")]),t._v(" "),a("p",[t._v("由于继承的奇妙之处，所有这些通用功能都可用，其中一个类可以继承和扩展另一个类的功能。 为了帮助您理解这一点，请查看下图，该图显示了pixi.js提供的大多数显示对象。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/scroller/ps-tut2-screenshot1.png",alt:""}})]),t._v(" "),a("p",[t._v("从上图可以看出，最基本的类型是"),a("code",[t._v("PIXI.DisplayObject")]),t._v("类，每个其他显示对象都继承自该类。 此类表示将对象呈现到屏幕所需的绝对必要元素。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("当我说"),a("strong",[t._v("显示对象")]),t._v("("),a("strong",[t._v("display objects")]),t._v(")时，我不仅指的是"),a("code",[t._v("PIXI.DisplayObject")]),t._v("类。 相反，我指的是"),a("code",[t._v("PIXI.DisplayObject")]),t._v("及继承自其的所有对象。 本质上，当我使用显示对象一词时，是指pixi.js可以在屏幕上呈现的任何对象。")])]),t._v(" "),a("p",[t._v("继承链中的下一个是"),a("code",[t._v("PIXI.Container")]),t._v("，它允许一个对象充当其他显示对象的容器。 我们在第一个教程中使用的"),a("code",[t._v("addChild()")]),t._v("方法就是"),a("code",[t._v("PIXI.Container")]),t._v("提供的，也可以通过"),a("code",[t._v("PIXI.Sprite")]),t._v("和"),a("code",[t._v("PIXI.TilingSpite")]),t._v("的继承使用。")]),t._v(" "),a("p",[t._v("本质上，继承树中的每个类都是它所继承的类的更专注于某一特殊类的版本。好消息是，我们可以利用继承来创建我们自己的专门显示对象。换句话说，我们可以编写专门的类来表示每个视差层，并让pixi.js处理它们，就好像它们只是另一个显示对象一样。这为我们提供了一种非常好的封装代码的方法，并保持所有东西的整洁。")]),t._v(" "),a("h3",{attrs:{id:"制作一个专门的远层（far-layer）显示对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#制作一个专门的远层（far-layer）显示对象"}},[t._v("#")]),t._v(" 制作一个专门的远层（FAR LAYER）显示对象")]),t._v(" "),a("p",[t._v("因此，让我们从远开始。")]),t._v(" "),a("p",[t._v("打开index.html文件，在init()函数中查找创建和设置该层的代码行。如下所示")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" farTexture "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PIXI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Texture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resources/bg-far.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\nfar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PIXI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extras"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TilingSprite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("farTexture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tilePosition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tilePosition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("far"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("如果我们能够创建一个表示远层的类，并在类中隐藏我们的实现细节，然后就可以使用下面的代码替换上面那些代码。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("far "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Far")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("far"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("大大减少了代码，对吧?另外，它的可读性也更强了。")]),t._v(" "),a("p",[t._v("让我们通过创建一个名为"),a("code",[t._v("Far")]),t._v("的类来实现它，它代表了我们的视差滚动的"),a("code",[t._v("Far")]),t._v("层。在项目的根文件夹中创建一个新文件，并将其命名为"),a("code",[t._v("Far.js")]),t._v("。")]),t._v(" "),a("p",[t._v("现在定义一个名为"),a("code",[t._v("Far")]),t._v("的函数，它代表我们这个类的构造函数。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Far")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("texture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PIXI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extras"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("TilingSprite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" texture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("在构造函数下面添加以下行，然后保存文件")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Far")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("texture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PIXI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extras"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("TilingSprite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" texture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Far")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PIXI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extras"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TilingSprite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("上面那行表示这个类继承了"),a("code",[t._v("PIXI.extras.TilingSprite")]),t._v("所有的属性和方法。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("构造函数是创建类实例的特殊函数类型。在JavaScript中，构造函数的名称也用于指定类的名称。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);