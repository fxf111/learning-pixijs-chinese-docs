(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{216:function(t,s,a){"use strict";a.r(s);var n=a(28),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("英文教程原作者"),a("a",{attrs:{href:"http://www.yeahbutisitflash.com/?author=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Christopher"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://twitter.com/intent/follow?screen_name=chriscaleb",target:"_blank",rel:"noopener noreferrer"}},[t._v("关注他@chriscaleb"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("本系列教程已经针对"),a("a",{attrs:{href:"http://www.pixijs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PixiJS v4"),a("OutboundLink")],1),t._v("进行了更新。")]),t._v(" "),a("p",[t._v("欢迎来到本系列的第四篇也是最后一篇教程，本系列详细介绍了如何使用JavaScript和pixi.js构建视差滚动图。\n在上一教程中，我们通过实现对象池并学习如何使用精灵表单来开始编写滚动器的前景层。\n今天，我们实际上将构造前景层并编写代码以在视口中滚动其游戏地图。")]),t._v(" "),a("h2",{attrs:{id:"你将会学到"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#你将会学到"}},[t._v("#")]),t._v(" 你将会学到...")]),t._v(" "),a("ul",[a("li",[t._v("如何在内存中表示游戏地图")]),t._v(" "),a("li",[t._v("如何显示和滚动大型游戏地图")]),t._v(" "),a("li",[t._v("构造游戏地图所需的支持代码")])]),t._v(" "),a("h2",{attrs:{id:"你应该了解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#你应该了解"}},[t._v("#")]),t._v(" 你应该了解...")]),t._v(" "),a("ul",[a("li",[t._v("如何构建和使用对象池")]),t._v(" "),a("li",[t._v("对JavaScript或ActionScript的理解")]),t._v(" "),a("li",[t._v("基本的面向对象概念")])]),t._v(" "),a("p",[t._v("我们将从中断的地方继续。继续使用在前三个教程中生成的代码。\n不过，如果您愿意的话，可以从GitHub下载"),a("a",{attrs:{href:"https://github.com/ccaleb/pixi-parallax-scroller",target:"_blank",rel:"noopener noreferrer"}},[t._v("第三个教程的源码"),a("OutboundLink")],1),t._v("，\n然后在GitHub上操作。")]),t._v(" "),a("p",[t._v("最终，我们将获得一个滚动的游戏地图，该地图几乎与Half Brick的出色的Monster Dash游戏中的地图相同。\n请记住，我们的地图将由一系列不同高度和宽度的墙跨构建而成，并且我们将利用对象池来检索构成每个墙跨的各个切片。\n我们还会为游戏锦上添花，随着时间的推移逐渐增加地图的滚动速度，就像在Monster Dash中一样\n"),a("a",{attrs:{href:"/demo/parallax-scroller_tutorial4"}},[a("img",{attrs:{src:"/images/scroller/ps-tut1-screenshot1.png",alt:"click to lanch demo"}})])]),t._v(" "),a("p",[t._v("上图即是我们这篇教程的最终版本，只需单击该图像即可查看实际效果。")]),t._v(" "),a("h2",{attrs:{id:"开始学习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始学习"}},[t._v("#")]),t._v(" 开始学习")]),t._v(" "),a("p",[t._v("如果您尚未完成之前的三个教程（"),a("RouterLink",{attrs:{to:"/guide/parallax-scroller/part-1.html"}},[t._v("第1部分")]),t._v("，"),a("RouterLink",{attrs:{to:"/guide/parallax-scroller/part-2.html"}},[t._v("第2部分")]),t._v("，\n"),a("RouterLink",{attrs:{to:"/guide/parallax-scroller/part-3.html"}},[t._v("第3部分")]),t._v("），那么我建议您先学习前三个教程。\n另外，请记住，您需要运行本地网络服务器才能测试您的工作。\n如果您尚未这样做，请参阅"),a("RouterLink",{attrs:{to:"/guide/parallax-scroller/part-1.html#入门"}},[t._v("第一个教程的“入门”")]),t._v("部分，\n以获取有关如何设置Web服务器的详细信息。\n与上一教程一样，您需要花大约两个小时才能完成本教程。")],1),t._v(" "),a("h2",{attrs:{id:"墙片类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#墙片类型"}},[t._v("#")]),t._v(" 墙片类型")]),t._v(" "),a("p",[t._v("我们已经介绍了构成前景层地图的各种墙壁切片类型。为了避免疑问，在此再次声明：")]),t._v(" "),a("ul",[a("li",[t._v("前缘")]),t._v(" "),a("li",[t._v("后缘")]),t._v(" "),a("li",[t._v("步")]),t._v(" "),a("li",[t._v("墙面装饰")]),t._v(" "),a("li",[t._v("窗口")])]),t._v(" "),a("p",[t._v("您还可以在下图中查看每种墙切片类型：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/images/scroller/scroller-4/diagram-1.png",alt:"diagram-1"}})]),t._v(" "),a("p",[t._v("让我们编写一个名为SliceType的简单类，该类存储代表每种切片类型的常量。\n另外，我们还将添加一种切片类型：墙间隙。\n墙间隙本质上将代表一个不可见的切片，用于在我们的墙跨之间创建空间。")]),t._v(" "),a("p",[t._v("打开您的文本编辑器并创建一个新文件。向其中添加以下内容:")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SliceType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nSliceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FRONT")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSliceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BACK")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSliceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STEP")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSliceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DECORATION")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSliceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("WINDOW")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSliceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GAP")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("保存文件并将其命名为SliceType.js。")]),t._v(" "),a("p",[t._v("每个常量都有一个从零开始的整数。\n这很重要，因为它将允许我们稍后在代码中使用这些常量来创建和访问查找表。")]),t._v(" "),a("p",[a("code",[t._v("我们的查询表将由数组表示，数组当然基于零索引。")])]),t._v(" "),a("p",[t._v("我们不要忘记在项目中包含班级的源文件。\n移动到"),a("code",[t._v("index.html")]),t._v("文件并添加以下行：")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"WallSpritesPool.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SliceType.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Main.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("保存您的更改。")]),t._v(" "),a("h2",{attrs:{id:"前处理层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前处理层"}},[t._v("#")]),t._v(" 前处理层")]),t._v(" "),a("p",[t._v("现在，让我们创建代表滚动器前景层的类。")]),t._v(" "),a("p",[t._v("就像我们的中层一样，我们的前景层将从Pixi的一个显示对象继承功能。\n前两层是PIXI.extras.TilingSprite的专门版本，\n而我们的前景层将继承自PIXI.Container。\n我们不需要为前景层使用Pixi的平铺精灵功能，\n这就是为什么我们选择PIXI.Container的原因。\nPIXI.Container类为我们提供了足够的功能，\n使我们能够像在其其他显示对象中一样，将专门的前景类添加到Pixi的显示列表中。")]),t._v(" "),a("p",[t._v("我们的前景层将代表我们的游戏地图。\n由于我们的游戏地图包含一系列墙跨度，因此我们将其命名为“墙”。")]),t._v(" "),a("p",[a("code",[t._v("当然，还有许多其他合适的名称，包括：Front和Map。 但是，考虑到本教程的前景层所代表的内容，Walls感觉很合适。")])]),t._v(" "),a("p",[t._v("那么接下来，首先为您的课程创建一个新文件，然后向其中添加以下内容：")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Walls")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PIXI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Container")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Walls")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PIXI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Container")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("将文件保存并命名为："),a("code",[t._v("Walls.js")]),t._v(".")])])}),[],!1,null,null,null);s.default=r.exports}}]);