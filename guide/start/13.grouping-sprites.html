<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>分组 | Pixi.js中文网</title>
    <meta name="description" content="Pixi.js中文网">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.e00e78c0.css" as="style"><link rel="preload" href="/assets/js/app.3a8759b0.js" as="script"><link rel="preload" href="/assets/js/2.5a76e6bf.js" as="script"><link rel="preload" href="/assets/js/21.8bc19ff9.js" as="script"><link rel="prefetch" href="/assets/js/10.d3b15d1f.js"><link rel="prefetch" href="/assets/js/11.8021df0d.js"><link rel="prefetch" href="/assets/js/12.f111beb1.js"><link rel="prefetch" href="/assets/js/13.5fc13977.js"><link rel="prefetch" href="/assets/js/14.9f988bdb.js"><link rel="prefetch" href="/assets/js/15.e4062746.js"><link rel="prefetch" href="/assets/js/16.4de45bde.js"><link rel="prefetch" href="/assets/js/17.755c9422.js"><link rel="prefetch" href="/assets/js/18.e0d9ed00.js"><link rel="prefetch" href="/assets/js/19.3a3dd194.js"><link rel="prefetch" href="/assets/js/20.3264e70e.js"><link rel="prefetch" href="/assets/js/22.72aa54de.js"><link rel="prefetch" href="/assets/js/23.42217c24.js"><link rel="prefetch" href="/assets/js/24.407a13c5.js"><link rel="prefetch" href="/assets/js/25.393c6a0c.js"><link rel="prefetch" href="/assets/js/26.620a2b1a.js"><link rel="prefetch" href="/assets/js/27.b0ff81fd.js"><link rel="prefetch" href="/assets/js/28.90c51ed4.js"><link rel="prefetch" href="/assets/js/29.8c4fcdaa.js"><link rel="prefetch" href="/assets/js/3.bf15e95f.js"><link rel="prefetch" href="/assets/js/30.1f816ae1.js"><link rel="prefetch" href="/assets/js/31.21595a2a.js"><link rel="prefetch" href="/assets/js/32.0ad9d16a.js"><link rel="prefetch" href="/assets/js/33.95e29a33.js"><link rel="prefetch" href="/assets/js/34.759542c2.js"><link rel="prefetch" href="/assets/js/35.9beae0c4.js"><link rel="prefetch" href="/assets/js/36.884e596c.js"><link rel="prefetch" href="/assets/js/37.19ac0cdb.js"><link rel="prefetch" href="/assets/js/38.2737125a.js"><link rel="prefetch" href="/assets/js/39.769c3130.js"><link rel="prefetch" href="/assets/js/4.0ffc361c.js"><link rel="prefetch" href="/assets/js/40.7fc13d5d.js"><link rel="prefetch" href="/assets/js/41.e22fd2d7.js"><link rel="prefetch" href="/assets/js/42.a705a4ac.js"><link rel="prefetch" href="/assets/js/43.28de7eca.js"><link rel="prefetch" href="/assets/js/44.3829a35e.js"><link rel="prefetch" href="/assets/js/45.b69028ac.js"><link rel="prefetch" href="/assets/js/5.12afb715.js"><link rel="prefetch" href="/assets/js/6.ea3b84cb.js"><link rel="prefetch" href="/assets/js/7.dff0981a.js"><link rel="prefetch" href="/assets/js/8.66b28cf9.js"><link rel="prefetch" href="/assets/js/9.4d904bc0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e00e78c0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/pixijs-v5-logo-1.png" alt="Pixi.js中文网" class="logo"> <span class="site-name can-hide">Pixi.js中文网</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          学习
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/start/1.introduction.html" class="nav-link">
  入门教程
</a></li><li class="dropdown-subitem"><a href="/guide/parallax-scroller/part-1.html" class="nav-link">
  进阶教程
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://b.aitrade.ga/pixi.js-cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/pages/folder2/test4.html" class="nav-link">
  琐碎
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/pages/example/container.html" class="nav-link">
  示例
</a></div><div class="nav-item"><a href="https://github.com/fxf111/pixijs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          学习
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/start/1.introduction.html" class="nav-link">
  入门教程
</a></li><li class="dropdown-subitem"><a href="/guide/parallax-scroller/part-1.html" class="nav-link">
  进阶教程
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://b.aitrade.ga/pixi.js-cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/pages/folder2/test4.html" class="nav-link">
  琐碎
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/pages/example/container.html" class="nav-link">
  示例
</a></div><div class="nav-item"><a href="https://github.com/fxf111/pixijs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>起步</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/start/1.introduction.html" class="sidebar-link">简介</a></li><li><a href="/guide/start/2.setup.html" class="sidebar-link">安装</a></li><li><a href="/guide/start/3.stage.html" class="sidebar-link">创建应用和stage（舞台）</a></li><li><a href="/guide/start/4.sprite.html" class="sidebar-link">sprites（精灵）</a></li><li><a href="/guide/start/5.positioning-sprites.html" class="sidebar-link">定位精灵</a></li><li><a href="/guide/start/6.size-and-scale.html" class="sidebar-link">大小和缩放</a></li><li><a href="/guide/start/7.rotation.html" class="sidebar-link">旋转</a></li><li><a href="/guide/start/8.make-sprite-from-a-tileset-sub-image.html" class="sidebar-link">使用雪碧图制作精灵</a></li><li><a href="/guide/start/9.make-sprite-from-texture-atlas.html" class="sidebar-link">使用纹理贴图集制作精灵</a></li><li><a href="/guide/start/10.moving-sprites.html" class="sidebar-link">移动精灵</a></li><li><a href="/guide/start/11.game-states.html" class="sidebar-link">游戏状态</a></li><li><a href="/guide/start/12.keyboard-movement.html" class="sidebar-link">键盘移动</a></li><li><a href="/guide/start/13.grouping-sprites.html" class="active sidebar-link">精灵分组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/start/13.grouping-sprites.html#分组" class="sidebar-link">分组</a></li><li class="sidebar-sub-header"><a href="/guide/start/13.grouping-sprites.html#局部坐标和全局坐标" class="sidebar-link">局部坐标和全局坐标</a></li><li class="sidebar-sub-header"><a href="/guide/start/13.grouping-sprites.html#使用粒子容器particlecontainer对精灵进行分组" class="sidebar-link">使用粒子容器ParticleContainer对精灵进行分组</a></li></ul></li><li><a href="/guide/start/14.graphic-primitive.html" class="sidebar-link">图形绘制</a></li><li><a href="/guide/start/15.collision-detection.html" class="sidebar-link">碰撞检测</a></li><li><a href="/guide/start/16.case-study-treasure-hunter.html" class="sidebar-link">案例：寻宝猎人</a></li><li><a href="/guide/start/17.sprite-more.html" class="sidebar-link">精灵的额外知识</a></li><li><a href="/guide/start/18.taking-it-further.html" class="sidebar-link">进一步使用</a></li><li><a href="/guide/start/19.support.html" class="sidebar-link">支持这个项目</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="分组"><a href="#分组" class="header-anchor">#</a> 分组</h2> <p>在你创建游戏场景时，可以给精灵们分组，作为一个整体管理。Pixi有一个名为<code>Container</code>的对象，它可以把精灵们组合在一起。</p> <p>假设您要显示三个精灵：一只猫，一只刺猬和一个老虎。创建并设置好它们的坐标——<em>但不要将它们添加到舞台上</em>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//The cat</span>
<span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span>id<span class="token punctuation">[</span><span class="token string">&quot;cat.png&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cat<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//The hedgehog</span>
<span class="token keyword">let</span> hedgehog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span>id<span class="token punctuation">[</span><span class="token string">&quot;hedgehog.png&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hedgehog<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//The tiger</span>
<span class="token keyword">let</span> tiger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span>id<span class="token punctuation">[</span><span class="token string">&quot;tiger.png&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tiger<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>然后，创建一个<code>animals</code>容器（container）（用来把它们组合起来）：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> animals <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PIXI<span class="token punctuation">.</span>Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后使用<code>addChild</code>把<code>它们三个添加到分组(group)</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>animals<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span>
animals<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>hedgehog<span class="token punctuation">)</span><span class="token punctuation">;</span>
animals<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>tiger<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最后，把这个分组添加到场景中。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>animals<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（<code>stage</code>对象也是一个<code>容器(container)</code>，它是所有Pixi精灵的根容器）</p> <p>下面就是这段代码的效果：</p> <p><img src="/images/start/18.png" alt=""></p> <p><img src="/images/start/19.png" alt=""></p> <p>如上图所示，您可以将<code>animals</code>分组视为一个单元。把<code>容器(Container)</code>视为一种不包含纹理的特殊精灵。</p> <p>您可以用<code>animals</code>的<code>children</code>属性列出它包含的所有精灵。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>animals<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
<span class="token comment">//Displays: Array [Object, Object, Object]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>你可以看到，<code>animals</code>分组包含3个精灵。</p> <p>因为<code>animals</code>分组与精灵类似，所以它拥有精灵所有的属性，因此你可以改变它的<code>x</code>、<code>y</code>、<code>alpha</code>、<code>scale</code>等值。在父容器上更改的任何属性值都将以一种相对的方式影响子精灵。</p> <p>因此，如果设置了分组的<code>x</code>和<code>y</code>坐标，则所有子精灵将相对于组的左上角重新定位。 请看下面，如果将动物的<code>x</code>和<code>y</code>坐标设置为<code>64</code>，会发生什么？</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>animals<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>整个精灵分组将向右移动64个像素，向下移动64个像素。</p> <p><img src="/images/start/20.png" alt=""></p> <p><code>animals</code>分组也有其自己的尺寸，该尺寸基于包含的精灵所占据的面积。 您可以查看它的<code>width</code>和<code>height</code>，如下所示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>animals<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Displays: 112</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>animals<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Displays: 112</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/images/start/21.png" alt=""></p> <p>如果改变分组的<code>width</code>和<code>height</code>会发生什么？</p> <p><img src="/images/start/22.png" alt=""></p> <p>您可以将尽可能多<code>的容器</code>嵌套到其他<code>容器</code>中，以便在需要时创建多层结构。然而，一个可显示对象<code>DisplayObject</code>(例如一个<code>精灵</code>或另一个<code>容器</code>)只能拥有一个父级。如果您使用<code>addChild</code>使一个精灵成为另一个对象的子对象，Pixi将自动从当前父对象中删除它。</p> <h2 id="局部坐标和全局坐标"><a href="#局部坐标和全局坐标" class="header-anchor">#</a> 局部坐标和全局坐标</h2> <p>当您将一个精灵添加到<code>容器</code>中时，它的<code>x</code>和<code>y</code>坐标相对于分组的左上角。<code>x</code>和<code>y</code>就是<strong>局部坐标</strong>。你知道猫在这幅图中的坐标吗？</p> <p><img src="/images/start/20.png" alt=""></p> <p>让我们看一下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Displays: 16</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>16？是! 那是因为猫从该组的左上角仅偏移了16个像素。 16是猫的局部坐标。</p> <p>精灵也有一个<strong>全局坐标</strong>。全局坐标是从舞台左上角到精灵的定位点(通常是精灵的左上角)的距离。你可以在使用<code>toGlobal</code>方法查看一个精灵的全局坐标：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>parentSprite<span class="token punctuation">.</span><span class="token function">toGlobal</span><span class="token punctuation">(</span>childSprite<span class="token punctuation">.</span>position<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这意味着你可以像这样找到<code>animals</code>分组中猫的全局坐标。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>animals<span class="token punctuation">.</span><span class="token function">toGlobal</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Displays: Object {x: 80, y: 80...};</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>x</code>和<code>y</code>坐标是80。这就是猫的全局坐标相对于舞台左上角的坐标。</p> <p>如果你想要查看一个精灵的全局位置，但又不知道它的父容器是谁，那怎么办呢?别急，每个精灵都有一个叫做<code>parent</code>的属性，它会告诉你精灵的父容器是谁。如果您直接向<code>舞台</code>添加一个精灵，那么<code>舞台</code>将是精灵的父容器。在上面的例子中，猫的父容器是<code>animals</code>。这意味着您可以通过编写这样的代码来获取猫的全局坐标。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>cat<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">toGlobal</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>即使你不知道猫的父容器是什么，你也能知道它的全局坐标。</p> <p>还有一种方法可以计算全局坐标!这会是最好的一种方法，所以听好了!如果您想知道画布左上角到精灵的距离，而不知道或不关心精灵的父容器是什么，那么可以使用<code>getGlobalPosition</code>方法。下面我们就用它来查看老虎的全局坐标。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>tiger<span class="token punctuation">.</span><span class="token function">getGlobalPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>x
tiger<span class="token punctuation">.</span><span class="token function">getGlobalPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这这个例子中，x和y值是128。<code>getGlobalPosition</code>的特别之处在于它是高度精确的:它将在精灵的本地坐标发生变化时立即给出精灵的准确全局坐标。这是我要求Pixi开发团队专门为游戏添加的这一功能，以精确检测碰撞。(感谢Matt和团队的其他成员添加了它!)</p> <p>如果要将全局坐标转换为本地坐标怎么办？ 您可以使用<code>toLocal</code>方法，如下所示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>sprite<span class="token punctuation">.</span><span class="token function">toLocal</span><span class="token punctuation">(</span>sprite<span class="token punctuation">.</span>position<span class="token punctuation">,</span> anyOtherSprite<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用<code>toLocal</code>查看精灵和其他精灵之间的距离。下面我们来看看老虎和刺猬的相对位置。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>tiger<span class="token punctuation">.</span><span class="token function">toLocal</span><span class="token punctuation">(</span>tiger<span class="token punctuation">.</span>position<span class="token punctuation">,</span> hedgehog<span class="token punctuation">)</span><span class="token punctuation">.</span>x
tiger<span class="token punctuation">.</span><span class="token function">toLocal</span><span class="token punctuation">(</span>tiger<span class="token punctuation">.</span>position<span class="token punctuation">,</span> hedgehog<span class="token punctuation">)</span><span class="token punctuation">.</span>y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>x</code>值是32，<code>y</code>值是32。在示例图像中，可以看到老虎的左上角位于刺猬左上角向右、向下偏移32像素的位置。</p> <h2 id="使用粒子容器particlecontainer对精灵进行分组"><a href="#使用粒子容器particlecontainer对精灵进行分组" class="header-anchor">#</a> 使用粒子容器ParticleContainer对精灵进行分组</h2> <p>Pixi有另一种高性能的方式来组合精灵，称为<code>粒子容器ParticleContaine</code>(<code>PIXI.particles.ParticleContainer</code>)。任何在<code>ParticleContainer</code>中的精灵渲染速度都比在常规容器中快2到5倍。这对于游戏来说是一个巨大的性能提升。</p> <p>像这样创建一个<code>ParticleContainer</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> superFastSprites <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PIXI<span class="token punctuation">.</span>particles<span class="token punctuation">.</span>ParticleContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后使用<code>addChild</code>向它添加精灵，就像使用任何普通<code>容器</code>一样。</p> <p>如果您决定使用<code>ParticleContainer</code>，则必须做出一些妥协。<code>ParticleContainer</code>中的精灵只有几个基本属性:<code>x</code>、<code>y</code>、<code>width</code>、<code>height</code>、<code>scale</code>、<code>pivot</code>、<code>alpha</code>、'visible等等。而且，它所包含的精灵包含子元素。一个<code>ParticleContainer</code>也不能使用Pixi的高级视觉效果，如过滤器和混合模式。每个<code>ParticleContainer</code>只能使用一个纹理(所以如果你想要不同外观的精灵，你必须使用雪碧图)。但是为了获得巨大的性能提升，这些妥协是随处可见的。</p> <p>为什么精灵在<code>粒子容器</code>中的速度如此之快?因为精灵的位置是直接在GPU上计算的。你正在使用的最新版本的Pixi很可能比我在这里描述的有更多的特性丰富的<code>ParticleContainer</code>。有关详细信息，请参阅当前<a href="http://pixijs.download/release/docs/PIXI.particles.ParticleContainer.html" target="_blank" rel="noopener noreferrer">ParticleContainer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>文档。</p> <p>在创建<code>ParticleContainer</code>的时候，有四个可选参数:<code>size</code>、<code>properties</code>、<code>batchSize</code>和<code>autoResize</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> superFastSprites <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ParticleContainer</span><span class="token punctuation">(</span>maxSize<span class="token punctuation">,</span> properties<span class="token punctuation">,</span> batchSize<span class="token punctuation">,</span> autoResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>maxSize</code>的默认值为1500。因此，如果想要显示更多的sprite，请将其设置为更大的数字。 <code>properties</code>参数是一个可以设置5个布尔值的对象：<code>scale</code>, <code>position</code>, <code>rotation</code>, <code>uvs</code>和<code>alphaAndTint</code>。 <code>position</code>的默认值为<code>true</code>，但其他所有值均设置为<code>false</code>。 这意味着，如果您想在ParticleContainer中更改子画面的<code>rotation</code>，<code>scale</code>，<code>tint</code>或<code>uvs</code>，则必须将这些属性设置为<code>true</code>，如下所示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> superFastSprites <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ParticleContainer</span><span class="token punctuation">(</span>
  size<span class="token punctuation">,</span> 
  <span class="token punctuation">{</span>
    rotation<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    alphaAndtint<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    scale<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    uvs<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>但是，如果您认为不需要使用这些属性，请将它们设置为<code>false</code>可以最大限度地发挥性能。</p> <p>什么是<code>uv</code>属性?只有当粒子需要在动画中改变纹理时，才将它设置为<code>true</code>。(所有的精灵的纹理必须在同一个雪碧图上）</p> <p>（注意：<code>UV映射</code>是3D图形显示术语，指的是被映射到3D表面上的纹理（图像）的<code>x</code>和<code>y</code>坐标。<code>U</code>是<code>x</code>轴，<code>V</code>是<code>y</code>轴。WebGL已经使用 <code>x</code>，<code>y</code>和<code>z</code>用来表示3D空间位置，因此选择<code>U</code>和<code>V</code>表示2D图像纹理的<code>x</code>和<code>y</code>。）</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">lastUpdate:</span> <span class="time">4/11/2020, 2:51:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/start/12.keyboard-movement.html" class="prev">
        键盘移动
      </a></span> <span class="next"><a href="/guide/start/14.graphic-primitive.html">
        图形绘制
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3a8759b0.js" defer></script><script src="/assets/js/2.5a76e6bf.js" defer></script><script src="/assets/js/21.8bc19ff9.js" defer></script>
  </body>
</html>
